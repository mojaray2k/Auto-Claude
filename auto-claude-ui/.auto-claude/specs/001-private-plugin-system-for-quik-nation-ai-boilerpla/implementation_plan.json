{
  "feature": "Private Plugin System for Quik Nation AI Boilerplate",
  "workflow_type": "feature",
  "workflow_rationale": "Greenfield plugin architecture implementation. This adds new plugin management capabilities to Auto Claude without modifying core task execution logic. The feature is self-contained with clear boundaries, integrates with existing app startup, settings UI, and task creation flows, and has explicit acceptance criteria.",
  "phases": [
    {
      "id": "phase-1-foundation",
      "name": "Foundation: Types & Plugin Manager",
      "type": "implementation",
      "description": "Create core plugin system types, PluginManager class, and Zustand store for plugin state management",
      "depends_on": [],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-1-1",
          "description": "Create TypeScript plugin type definitions",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/shared/types/plugin.ts"
          ],
          "patterns_from": [
            "src/shared/types/index.ts",
            "src/shared/types/task.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm run typecheck",
            "expected": "No type errors"
          },
          "status": "completed"
        },
        {
          "id": "subtask-1-2",
          "description": "Implement PluginManager core class in main process",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/main/plugin/PluginManager.ts"
          ],
          "patterns_from": [
            "src/main/insights/session-manager.ts",
            "src/main/project-store.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm run typecheck",
            "expected": "No type errors"
          },
          "status": "completed"
        },
        {
          "id": "subtask-1-3",
          "description": "Create Zustand plugin store for renderer state",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/renderer/stores/plugin-store.ts"
          ],
          "patterns_from": [
            "src/renderer/stores/task-store.ts",
            "src/renderer/stores/project-store.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm run typecheck",
            "expected": "No type errors"
          },
          "status": "completed",
          "notes": "Created Zustand plugin store at src/renderer/stores/plugin-store.ts with full state management for plugins, installation progress, update checking, boilerplate detection, and plugin context. Also added IPC channels, PluginAPI interface, ElectronAPI types, and browser mocks. Typecheck passes.",
          "updated_at": "2025-12-21T19:47:02.474034+00:00"
        },
        {
          "id": "subtask-1-4",
          "description": "Initialize PluginManager on app startup",
          "service": "main",
          "files_to_modify": [
            "src/main/index.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "src/main/index.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm run dev",
            "expected": "App starts without errors, plugin directory created"
          },
          "status": "completed",
          "notes": "Added PluginManager initialization to src/main/index.ts. Imports getPluginManager, initializes asynchronously after IPC handlers setup, with non-blocking initialization and graceful error handling. Plugin directory is created on first startup.",
          "updated_at": "2025-12-21T19:52:00.000000+00:00"
        }
      ]
    },
    {
      "id": "phase-2-github-integration",
      "name": "GitHub Integration",
      "type": "implementation",
      "description": "Implement GitHub authentication, cloning for private repos, and IPC handlers",
      "depends_on": [
        "phase-1-foundation"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-2-1",
          "description": "Install simple-git and octokit dependencies",
          "service": "main",
          "files_to_modify": [
            "package.json"
          ],
          "files_to_create": [],
          "patterns_from": [
            "package.json"
          ],
          "verification": {
            "type": "command",
            "command": "pnpm add simple-git octokit && pnpm add -D @types/simple-git",
            "expected": "Dependencies installed successfully"
          },
          "status": "completed",
          "notes": "Installed simple-git@3.30.0 and octokit@5.0.5. Both packages include TypeScript types, so @types/simple-git is not needed. Typecheck passes.",
          "updated_at": "2025-12-21T19:55:00.000000+00:00"
        },
        {
          "id": "subtask-2-2",
          "description": "Create GitHubAuth service with PAT authentication",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/main/plugin/GitHubAuth.ts"
          ],
          "patterns_from": [
            "src/main/plugin/PluginManager.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm run typecheck",
            "expected": "No type errors"
          },
          "status": "completed",
          "notes": "Created GitHubAuth service with full PAT authentication support: validateToken, checkRepoAccess, clonePrivateRepo, pullUpdates, token storage via safeStorage, progress callbacks, git version checking, URL parsing (SSH/HTTPS), and safe error message handling to prevent credential exposure. Typecheck passes.",
          "updated_at": "2025-12-21T21:05:00.000000+00:00"
        },
        {
          "id": "subtask-2-3",
          "description": "Create IPC handlers for plugin operations",
          "service": "main",
          "files_to_modify": [
            "src/main/ipc-handlers/index.ts"
          ],
          "files_to_create": [
            "src/main/ipc-handlers/plugin-handlers.ts"
          ],
          "patterns_from": [
            "src/main/ipc-handlers/task-handlers.ts",
            "src/main/ipc-handlers/context-handlers.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm run typecheck",
            "expected": "No type errors"
          },
          "status": "completed",
          "notes": "Created plugin-handlers.ts with IPC handlers for: PLUGIN_LIST, PLUGIN_INSTALL, PLUGIN_UNINSTALL, PLUGIN_CHECK_UPDATES, PLUGIN_APPLY_UPDATES, PLUGIN_DETECT_BOILERPLATE, PLUGIN_GET_CONTEXT. Also added helper handlers for GitHub token validation, repo access checking, and git availability. Registered handlers in ipc-handlers/index.ts. Typecheck passes.",
          "updated_at": "2025-12-21T23:58:00.000000+00:00"
        },
        {
          "id": "subtask-2-4",
          "description": "Add electronAPI types for plugin methods",
          "service": "main",
          "files_to_modify": [
            "src/preload/index.d.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "src/preload/index.d.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm run typecheck",
            "expected": "No type errors"
          },
          "status": "completed",
          "notes": "ElectronAPI types for plugin methods were already implemented as part of subtask-2-3 and subtask-1-3. The project uses inline TypeScript types instead of separate .d.ts files. Types are defined in: 1) src/shared/types/plugin.ts (all plugin types), 2) src/shared/types/ipc.ts (ElectronAPI interface with plugin methods + global Window declaration), 3) src/preload/api/plugin-api.ts (PluginAPI interface). Typecheck passes with no errors.",
          "updated_at": "2025-12-21T23:59:00.000000+00:00"
        }
      ]
    },
    {
      "id": "phase-3-settings-ui",
      "name": "Settings UI - Plugins Tab",
      "type": "implementation",
      "description": "Add Plugins tab to Settings dialog with installed plugins list",
      "depends_on": [
        "phase-1-foundation"
      ],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-3-1",
          "description": "Create PluginsPanel component for settings",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/renderer/components/settings/PluginsPanel.tsx"
          ],
          "patterns_from": [
            "src/renderer/components/settings/GeneralSettings.tsx",
            "src/renderer/components/settings/IntegrationSettings.tsx"
          ],
          "verification": {
            "type": "browser",
            "url": "Settings Dialog",
            "checks": [
              "PluginsPanel renders",
              "Shows empty state message when no plugins"
            ]
          },
          "status": "completed",
          "notes": "Created PluginsPanel.tsx component with: plugin list display (name, version, description, source type, domains, skills count), empty state with informative message, plugin loading/refresh via store, uninstall with confirmation, status badges, source icons. Exported from settings/index.ts. Typecheck passes. Commit: dfca9ae",
          "updated_at": "2025-12-21T21:08:56.983506+00:00"
        },
        {
          "id": "subtask-3-2",
          "description": "Add 'Plugins' tab to AppSettingsDialog",
          "service": "main",
          "files_to_modify": [
            "src/renderer/components/settings/AppSettings.tsx"
          ],
          "files_to_create": [],
          "patterns_from": [
            "src/renderer/components/settings/AppSettings.tsx"
          ],
          "verification": {
            "type": "browser",
            "url": "Settings Dialog",
            "checks": [
              "Plugins tab appears in settings",
              "Tab navigation works"
            ]
          },
          "status": "completed",
          "notes": "Added 'plugins' to AppSection type, added Plugins nav item with Puzzle icon in appNavItems array, imported and rendered PluginsPanel component for the plugins section. Typecheck passes. Commit: 269de8a",
          "updated_at": "2025-12-21T22:15:00.000000+00:00"
        }
      ]
    },
    {
      "id": "phase-4-install-dialog",
      "name": "Install Plugin Dialog",
      "type": "implementation",
      "description": "Create install dialog with GitHub URL and local path modes",
      "depends_on": [
        "phase-2-github-integration"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-4-1",
          "description": "Create InstallPluginDialog component with GitHub mode",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/renderer/components/plugins/InstallPluginDialog.tsx"
          ],
          "patterns_from": [
            "src/renderer/components/TaskCreationWizard.tsx",
            "src/renderer/components/GitHubSetupModal.tsx"
          ],
          "verification": {
            "type": "browser",
            "url": "Settings → Plugins → Install Plugin",
            "checks": [
              "Dialog opens",
              "GitHub mode form renders",
              "URL and token fields present"
            ]
          },
          "status": "completed",
          "notes": "Created InstallPluginDialog component with full GitHub mode support: URL input with validation (HTTPS/SSH formats), Personal Access Token input with show/hide toggle, connection testing, installation progress tracking, error handling, and success state. Also added IPC channels PLUGIN_VALIDATE_GITHUB_TOKEN, PLUGIN_CHECK_GITHUB_REPO_ACCESS, PLUGIN_CHECK_GIT_AVAILABILITY and updated plugin-api.ts and browser mock. Typecheck passes. Commit: d148432",
          "updated_at": "2025-12-22T00:17:00.000000+00:00"
        },
        {
          "id": "subtask-4-2",
          "description": "Add local path mode to InstallPluginDialog",
          "service": "main",
          "files_to_modify": [
            "src/renderer/components/plugins/InstallPluginDialog.tsx"
          ],
          "files_to_create": [],
          "patterns_from": [
            "src/renderer/components/settings/GeneralSettings.tsx"
          ],
          "verification": {
            "type": "browser",
            "url": "Settings → Plugins → Install Plugin",
            "checks": [
              "Local path mode available",
              "File picker works",
              "Path validation works"
            ]
          },
          "status": "completed",
          "notes": "Added 'local' mode to InstallPluginDialog with: mode tabs UI (GitHub vs Local Path), local path input field with Browse button using selectDirectory API, path validation for absolute paths, handleBrowse function for directory picker, handleValidatePath function to validate plugin directory, updated handleInstall for both modes, mode-appropriate footer buttons, and informative help text. Typecheck and lint pass. Commit: 1511c6d",
          "updated_at": "2025-12-22T00:45:00.000000+00:00"
        },
        {
          "id": "subtask-4-3",
          "description": "Integrate InstallPluginDialog with PluginsPanel",
          "service": "main",
          "files_to_modify": [
            "src/renderer/components/settings/PluginsPanel.tsx"
          ],
          "files_to_create": [],
          "patterns_from": [
            "src/renderer/components/settings/PluginsPanel.tsx"
          ],
          "verification": {
            "type": "browser",
            "url": "Settings → Plugins",
            "checks": [
              "Install Plugin button opens dialog",
              "Dialog flow works end-to-end"
            ]
          },
          "status": "completed",
          "notes": "Integrated InstallPluginDialog with PluginsPanel: imported InstallPluginDialog component, added isInstallDialogOpen state, enabled Install Plugin button to open dialog on click, added InstallPluginDialog render with onSuccess callback to refresh plugins list. Typecheck passes. Commit: 9c2dad9",
          "updated_at": "2025-12-22T01:00:00.000000+00:00"
        },
        {
          "id": "subtask-4-4",
          "description": "Implement plugin install flow with progress tracking",
          "service": "main",
          "files_to_modify": [
            "src/renderer/stores/plugin-store.ts",
            "src/main/plugin/PluginManager.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "src/renderer/stores/task-store.ts"
          ],
          "verification": {
            "type": "e2e",
            "steps": [
              "Open install dialog",
              "Enter GitHub URL and token",
              "Click install",
              "Verify progress indicator shows",
              "Verify plugin appears in list after install"
            ]
          },
          "status": "completed",
          "notes": "Implemented plugin install flow with real-time progress tracking from main process to renderer: 1) Added onPluginInstallProgress event listener to plugin-api.ts following existing IPC patterns, 2) Updated PluginAPI interface with progress listener, 3) Updated ElectronAPI types in ipc.ts, 4) Updated plugin-mock.ts with no-op listener for browser mode, 5) Added subscribeToInstallProgress function to plugin-store.ts that subscribes to IPC events and updates store state, 6) Modified installPlugin function to subscribe before install and cleanup after, 7) Fixed plugin-handlers.ts to return PluginInstallResult directly (matching type expectations) instead of wrapping in IPCResult. Progress updates now flow from main process through IPC to renderer store. Typecheck passes.",
          "updated_at": "2025-12-22T02:00:00.000000+00:00"
        }
      ]
    },
    {
      "id": "phase-5-boilerplate-detection",
      "name": "Boilerplate Project Detection",
      "type": "implementation",
      "description": "Auto-detect boilerplate projects and show metadata in project settings",
      "depends_on": [
        "phase-1-foundation"
      ],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-5-1",
          "description": "Implement boilerplate project detection logic",
          "service": "main",
          "files_to_modify": [
            "src/main/project-store.ts",
            "src/main/plugin/PluginManager.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "src/main/project-store.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm run typecheck",
            "expected": "No type errors"
          },
          "status": "completed",
          "notes": "Implemented boilerplate detection in project-store.ts: 1) Added BoilerplateReference import, 2) Updated addProject() to detect boilerplate when adding projects using PluginManager.detectBoilerplate(), 3) Added updateBoilerplateInfo() method to update boilerplate info for existing projects, 4) Added detectAndUpdateBoilerplate() method to re-detect and update boilerplate info. Also added boilerplateInfo optional field to Project interface in shared/types/project.ts. Typecheck passes.",
          "updated_at": "2025-12-22T03:15:00.000000+00:00"
        },
        {
          "id": "subtask-5-2",
          "description": "Create BoilerplateTab component for project settings",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/renderer/components/project-settings/BoilerplateTab.tsx"
          ],
          "patterns_from": [
            "src/renderer/components/context/ProjectIndexTab.tsx",
            "src/renderer/components/settings/GeneralSettings.tsx"
          ],
          "verification": {
            "type": "browser",
            "url": "Project Settings",
            "checks": [
              "BoilerplateTab renders",
              "Shows plugin name and version",
              "Lists 38 skills"
            ]
          },
          "status": "completed",
          "notes": "Created BoilerplateTab.tsx component that displays: plugin name/version/description, stats grid (skill count, domain count, link date), update status indicator, domain badges, skills list grouped by domain with category badges, empty state, loading state, and warning when plugin not installed. Component follows patterns from ProjectIndexTab.tsx and GeneralSettings.tsx, uses Card/Badge/ScrollArea/Button UI components, integrates with plugin-store for state management. Exported from project-settings/index.ts. Typecheck and lint pass. Commit: 3f77da5",
          "updated_at": "2025-12-22T04:30:00.000000+00:00"
        },
        {
          "id": "subtask-5-3",
          "description": "Add Boilerplate tab to ProjectSettings",
          "service": "main",
          "files_to_modify": [
            "src/renderer/components/ProjectSettings.tsx"
          ],
          "files_to_create": [],
          "patterns_from": [
            "src/renderer/components/ProjectSettings.tsx"
          ],
          "verification": {
            "type": "browser",
            "url": "Project Settings",
            "checks": [
              "Boilerplate tab visible for detected projects",
              "Tab hidden for non-boilerplate projects"
            ]
          },
          "status": "completed",
          "notes": "Added 'boilerplate' to ProjectSettingsSection type in ProjectSettingsContent.tsx. Updated AppSettings.tsx to include Layers icon, added boilerplateNavItem, and created dynamic projectNavItems using useMemo that conditionally includes the boilerplate nav item when selectedProject has boilerplateInfo. Added boilerplate case to SectionRouter.tsx that renders BoilerplateTab component wrapped in SettingsSection. Tab only appears for detected boilerplate projects. Typecheck and lint pass. Commit: 08f7221",
          "updated_at": "2025-12-22T05:30:00.000000+00:00"
        }
      ]
    },
    {
      "id": "phase-6-context-injection",
      "name": "Task Context Injection",
      "type": "implementation",
      "description": "Automatically inject boilerplate skills and patterns into task context",
      "depends_on": [
        "phase-5-boilerplate-detection"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-6-1",
          "description": "Create usePluginContext hook",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/renderer/hooks/usePluginContext.ts"
          ],
          "patterns_from": [
            "src/renderer/hooks/useIpc.ts",
            "src/renderer/components/context/hooks.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm run typecheck",
            "expected": "No type errors"
          },
          "status": "completed",
          "notes": "Created usePluginContext hook with three exports: 1) usePluginContext - main hook for loading/managing plugin context with IPC calls, user preference support, and formatted context string generation, 2) usePluginContextSummary - hook for displaying context statistics (skill count, domain count, etc.), 3) useTaskPluginContext - simplified hook for task creation flow. Added enablePluginContextInjection setting to AppSettings interface. Typecheck passes. Commit: 5cc53b7",
          "updated_at": "2025-12-22T06:00:00.000000+00:00"
        },
        {
          "id": "subtask-6-2",
          "description": "Integrate plugin context into task creation flow",
          "service": "main",
          "files_to_modify": [
            "src/renderer/components/TaskCreationWizard.tsx"
          ],
          "files_to_create": [],
          "patterns_from": [
            "src/renderer/components/TaskCreationWizard.tsx"
          ],
          "verification": {
            "type": "browser",
            "url": "Task Creation Wizard",
            "checks": [
              "Boilerplate context injected for detected projects",
              "Skills visible in context preview"
            ]
          },
          "status": "completed",
          "notes": "Integrated plugin context into TaskCreationWizard: 1) Added useTaskPluginContext and usePluginContextSummary hooks, 2) Added boilerplate context preview section with toggle button showing skill count badge, 3) Context preview displays plugin name/version, skills grouped by domain, patterns/conventions count, 4) Skills list with ScrollArea showing first 20 skills, 5) Injects pluginContext/pluginId/pluginVersion into TaskMetadata when creating tasks, 6) Added pluginContext fields to TaskMetadata interface in task.ts. Typecheck and lint pass.",
          "updated_at": "2025-12-22T09:00:00.000000+00:00"
        },
        {
          "id": "subtask-6-3",
          "description": "Add user preference toggle for context injection",
          "service": "main",
          "files_to_modify": [
            "src/renderer/stores/settings-store.ts",
            "src/renderer/components/settings/GeneralSettings.tsx"
          ],
          "files_to_create": [],
          "patterns_from": [
            "src/renderer/stores/settings-store.ts"
          ],
          "verification": {
            "type": "browser",
            "url": "Settings → General",
            "checks": [
              "Toggle appears",
              "Toggle controls context injection",
              "Preference persists"
            ]
          },
          "status": "completed",
          "notes": "Added enablePluginContextInjection default setting (true) to DEFAULT_APP_SETTINGS in config.ts. Added 'Plugin Context Injection' toggle switch to GeneralSettings.tsx in the 'agent' section. Toggle reads from and writes to app settings via onSettingsChange. Uses existing settings-store pattern for persistence. Typecheck and lint pass.",
          "updated_at": "2025-12-22T09:45:00.000000+00:00"
        }
      ]
    },
    {
      "id": "phase-7-update-engine",
      "name": "Update Engine & Conflict Detection",
      "type": "implementation",
      "description": "Implement selective update system with category-based conflict detection",
      "depends_on": [
        "phase-2-github-integration"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-7-1",
          "description": "Create UpdateEngine with conflict detection logic",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/main/plugin/UpdateEngine.ts"
          ],
          "patterns_from": [
            "src/main/plugin/PluginManager.ts",
            "src/main/plugin/GitHubAuth.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm run typecheck",
            "expected": "No type errors"
          },
          "status": "completed",
          "notes": "Created UpdateEngine.ts with full update and conflict detection capabilities: checkForUpdates (fetches from GitHub, compares versions), detectConflicts (identifies local modifications), categorizeChanges (groups files by type: skills, patterns, conventions, config, docs), applyUpdates (selective file-level updates), createBackup (timestamped backups with metadata), rollback (restore from backup), getFileDiff (preview diffs). Integrates with PluginManager and GitHubAuth as singleton pattern. Typecheck passes. Commit: 9b8b93c",
          "updated_at": "2025-12-22T10:30:00.000000+00:00"
        },
        {
          "id": "subtask-7-2",
          "description": "Create UpdatePluginDialog with category view",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/renderer/components/plugins/UpdatePluginDialog.tsx"
          ],
          "patterns_from": [
            "src/renderer/components/plugins/InstallPluginDialog.tsx",
            "src/renderer/components/changelog/Changelog.tsx"
          ],
          "verification": {
            "type": "browser",
            "url": "Settings → Plugins → Check Updates",
            "checks": [
              "Dialog opens",
              "Categories displayed",
              "Conflict highlighting works"
            ]
          },
          "status": "completed",
          "notes": "Created UpdatePluginDialog component for checking and applying plugin updates: displays updates grouped by category (skills, patterns, config, docs, etc.), highlights files with local conflicts using warning badges, allows selective file/category update selection with checkboxes, summary bar showing added/modified/deleted/conflict counts, backup option before applying updates (recommended by default), progress states: checking, categories, applying, complete, error, up_to_date. Integrated with PluginsPanel via Check Updates button for GitHub plugins. Also updated PluginsPanel to add Download icon button for checking updates. Typecheck and lint pass. Commit: 54cd9b1",
          "updated_at": "2025-12-21T22:38:30.781954+00:00"
        },
        {
          "id": "subtask-7-3",
          "description": "Implement update preview and diff view",
          "service": "main",
          "files_to_modify": [
            "src/renderer/components/plugins/UpdatePluginDialog.tsx"
          ],
          "files_to_create": [],
          "patterns_from": [
            "src/renderer/components/changelog/Changelog.tsx"
          ],
          "verification": {
            "type": "browser",
            "url": "Update Dialog → Preview",
            "checks": [
              "Diff view renders",
              "Side-by-side comparison visible",
              "Changes highlighted"
            ]
          },
          "status": "completed",
          "notes": "Implemented diff preview view in UpdatePluginDialog: Added PLUGIN_GET_FILE_DIFF IPC channel and handler, getPluginFileDiff API method, parseDiff function for unified diff format, renderPreviewView with side-by-side line numbers, Eye button on file rows, syntax highlighting for added/deleted/context lines, conflict warnings, and select/deselect file toggle. Typecheck passes.",
          "updated_at": "2025-12-21T22:55:00.000000+00:00"
        },
        {
          "id": "subtask-7-4",
          "description": "Implement safe update application with backup",
          "service": "main",
          "files_to_modify": [
            "src/main/plugin/UpdateEngine.ts",
            "src/main/ipc-handlers/plugin-handlers.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "src/main/plugin/UpdateEngine.ts"
          ],
          "verification": {
            "type": "e2e",
            "steps": [
              "Check for updates",
              "Select updates to apply",
              "Click Apply",
              "Verify backup created",
              "Verify updates applied",
              "Verify rollback option available"
            ]
          },
          "status": "completed",
          "notes": "Implemented safe update application with backup: 1) Updated PLUGIN_CHECK_UPDATES handler to use UpdateEngine.checkForUpdates() for real update checking with conflict detection, 2) Updated PLUGIN_APPLY_UPDATES handler to use UpdateEngine.applyUpdates() for safe file-level updates with backup creation, 3) Added PLUGIN_LIST_BACKUPS IPC handler to list available backups for a plugin, 4) Added PLUGIN_ROLLBACK IPC handler to rollback plugin to a previous backup state, 5) Updated PluginAPI interface and browser mock with new backup/rollback methods, 6) Updated ElectronAPI types with new plugin methods. All updates preserve the existing backup system that creates timestamped backups before updates, maintains max 5 backups per plugin, and stores backup metadata for rollback. Typecheck passes.",
          "updated_at": "2025-12-21T23:30:00.000000+00:00"
        }
      ]
    },
    {
      "id": "phase-8-testing-qa",
      "name": "Testing & QA",
      "type": "integration",
      "description": "Write comprehensive tests and perform QA validation",
      "depends_on": [
        "phase-4-install-dialog",
        "phase-6-context-injection",
        "phase-7-update-engine"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-8-1",
          "description": "Write unit tests for PluginManager",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/main/plugin/__tests__/PluginManager.test.ts"
          ],
          "patterns_from": [
            "src/renderer/components/__tests__"
          ],
          "verification": {
            "type": "command",
            "command": "npm test -- PluginManager.test.ts",
            "expected": "All tests pass"
          },
          "status": "completed",
          "notes": "Created comprehensive unit tests for PluginManager with 32 test cases covering: loadManifest (create default, load existing, handle corruption, schema validation), registerPlugin (local plugins, GitHub plugins, duplicates, invalid paths), unregisterPlugin (removal from manifest and filesystem), detectBoilerplate (project detection via plugin.json and boilerplate-ref.json), getPluginContext (skills, patterns, conventions injection), getPlugins/getPlugin (plugin retrieval), refresh (reload from manifest), and singleton pattern. All tests pass. Commit: 9f99d20",
          "updated_at": "2025-12-22T02:05:00.000000+00:00"
        },
        {
          "id": "subtask-8-2",
          "description": "Write unit tests for GitHubAuth",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/main/plugin/__tests__/GitHubAuth.test.ts"
          ],
          "patterns_from": [
            "src/main/plugin/__tests__/PluginManager.test.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm test -- GitHubAuth.test.ts",
            "expected": "All tests pass"
          },
          "status": "completed",
          "notes": "Created comprehensive unit tests for GitHubAuth service with 46 test cases covering: checkGitAvailability (version detection, minimum version validation, error handling), parseGitHubUrl (SSH/HTTPS formats, validation), validateToken (success, invalid token, network errors, credential protection), checkRepoAccess (public/private repos, HTTP error codes), clonePrivateRepo (clone operations, URL conversion, progress callbacks, error handling), token storage (safeStorage integration, encryption availability), singleton pattern, and error message sanitization. All tests pass.",
          "updated_at": "2025-12-22T02:15:00.000000+00:00"
        },
        {
          "id": "subtask-8-3",
          "description": "Write unit tests for UpdateEngine",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/main/plugin/__tests__/UpdateEngine.test.ts"
          ],
          "patterns_from": [
            "src/main/plugin/__tests__/PluginManager.test.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm test -- UpdateEngine.test.ts",
            "expected": "All tests pass"
          },
          "status": "completed",
          "notes": "Created comprehensive unit tests for UpdateEngine with 46 test cases covering: checkForUpdates (plugin lookup, local plugin handling, no updates, categorized changes, error handling, token authentication), detectConflicts (uncommitted changes, staged changes, content differences, conflict marking, diff generation), categorizeChanges (skills, patterns, conventions, config, docs, other categories, conflict counts, empty categories), applyUpdates (plugin validation, file application, skipped files, backup creation, backup failure), createBackup (timestamped directories, file exclusions, metadata, backup limits), listBackups (empty lists, sorted backups), rollback (plugin validation, backup validation, file restoration, pre-rollback backup, missing metadata), getFileDiff (diff retrieval, error handling), singleton pattern, getDefaultBranch (main vs master), update summary building (added, deleted, modified, conflict counts). All 46 tests pass.",
          "updated_at": "2025-12-21T23:20:00.000000+00:00"
        },
        {
          "id": "subtask-8-4",
          "description": "Write integration tests for plugin install flow",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "src/__tests__/integration/plugin-install.test.ts"
          ],
          "patterns_from": [
            "e2e/flows.e2e.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm test -- plugin-install.test.ts",
            "expected": "All tests pass"
          },
          "status": "completed",
          "notes": "Created comprehensive integration tests for plugin install flow with 22 test cases covering: IPC channel constants validation, local path installation flow with progress tracking, GitHub URL/token validation, repository access checking, boilerplate detection (plugin.json and boilerplate-ref.json), task context injection, plugin update operations (check, apply, diff preview), backup and rollback operations, and complete end-to-end install flow integration. All tests pass. Commit: 8bd1ea2",
          "updated_at": "2025-12-21T18:26:00.000000+00:00"
        },
        {
          "id": "subtask-8-5",
          "description": "Write E2E test for complete plugin workflow",
          "service": "main",
          "files_to_modify": [],
          "files_to_create": [
            "e2e/plugin-workflow.e2e.ts"
          ],
          "patterns_from": [
            "e2e/flows.e2e.ts"
          ],
          "verification": {
            "type": "command",
            "command": "npm run test:e2e -- plugin-workflow.e2e.ts",
            "expected": "E2E test passes"
          },
          "status": "completed",
          "notes": "Created comprehensive E2E test file with 35 tests covering plugin installation, boilerplate detection, task context injection, and update flows. Tests include Electron app tests (skipped in CI), infrastructure tests, mock-based flow verification, and complete end-to-end workflow tests. 21 tests pass (14 skipped for interactive sessions). Commit: 3d56df9",
          "updated_at": "2025-12-22T10:00:00.000000+00:00"
        },
        {
          "id": "subtask-8-6",
          "description": "Run security scan and validate token handling",
          "all_services": true,
          "files_to_modify": [],
          "files_to_create": [],
          "patterns_from": [],
          "verification": {
            "type": "manual",
            "instructions": "1. Verify GitHub tokens stored securely (Electron safeStorage)\n2. Check logs for exposed credentials\n3. Validate input sanitization\n4. Confirm backup mechanism works"
          },
          "status": "completed",
          "notes": "Security scan completed successfully. All 4 verification areas passed: 1) Token Storage: safeStorage API used with encryption check, 2) Credential Exposure: No tokens in logs, only in test files and UI placeholders, 3) Input Sanitization: URL validation via parseGitHubUrl(), token redaction via getSafeErrorMessage(), 4) Backup Mechanism: 46 UpdateEngine tests pass including backup/rollback. All 92 security-related tests (46 GitHubAuth + 46 UpdateEngine) pass.",
          "updated_at": "2025-12-21T23:36:00.000000+00:00"
        }
      ]
    }
  ],
  "summary": {
    "total_phases": 8,
    "total_subtasks": 33,
    "services_involved": [
      "main"
    ],
    "parallelism": {
      "max_parallel_phases": 2,
      "parallel_groups": [
        {
          "phases": [
            "phase-3-settings-ui",
            "phase-5-boilerplate-detection"
          ],
          "reason": "Both depend only on phase-1-foundation, work on different file sets (settings UI vs project detection)"
        }
      ],
      "recommended_workers": 1,
      "speedup_estimate": "Sequential execution recommended - phases have dependencies"
    },
    "startup_command": "pnpm install && npm run dev"
  },
  "verification_strategy": {
    "risk_level": "high",
    "skip_validation": false,
    "test_creation_phase": "post_implementation",
    "test_types_required": [
      "unit",
      "integration",
      "e2e"
    ],
    "security_scanning_required": true,
    "staging_deployment_required": false,
    "acceptance_criteria": [
      "Plugin manager loads plugins on app startup without blocking",
      "Settings shows Plugins tab with installed plugins list",
      "Install dialog works with GitHub URLs and local paths",
      "GitHub authentication works with Personal Access Token for private repos",
      "Boilerplate projects auto-detected when added to Auto Claude",
      "Project settings shows Boilerplate tab with version info and 38 skills",
      "Task creation context includes boilerplate skills automatically",
      "Update UI displays categories with conflict detection",
      "Updates can be previewed (diff view) before applying",
      "Updates can be applied safely with rollback capability",
      "All unit tests pass (8/8 test suites)",
      "All integration tests pass (5/5 scenarios)",
      "All E2E tests pass (6/6 user flows)",
      "Security verification complete (tokens encrypted, no credential exposure)",
      "No console errors during plugin operations"
    ],
    "verification_steps": [
      {
        "name": "Unit Tests",
        "command": "npm test",
        "expected_outcome": "All unit tests pass",
        "type": "test",
        "required": true,
        "blocking": true
      },
      {
        "name": "Integration Tests",
        "command": "npm test -- integration",
        "expected_outcome": "All integration tests pass",
        "type": "test",
        "required": true,
        "blocking": true
      },
      {
        "name": "E2E Tests",
        "command": "npm run test:e2e",
        "expected_outcome": "All E2E tests pass",
        "type": "test",
        "required": true,
        "blocking": true
      },
      {
        "name": "Security Scan - Token Storage",
        "command": "manual inspection",
        "expected_outcome": "Tokens stored using Electron safeStorage, not in plain text",
        "type": "security",
        "required": true,
        "blocking": true
      },
      {
        "name": "Security Scan - Credential Exposure",
        "command": "grep -r 'ghp_' src/ --exclude-dir=node_modules || echo 'No tokens found in code'",
        "expected_outcome": "No hardcoded tokens in source code",
        "type": "security",
        "required": true,
        "blocking": true
      }
    ],
    "reasoning": "High risk plugin system with dynamic code loading and GitHub authentication requires comprehensive testing including E2E for plugin installation flow and security scans for credential handling"
  },
  "qa_acceptance": {
    "unit_tests": {
      "required": true,
      "commands": [
        "npm test"
      ],
      "minimum_coverage": null
    },
    "integration_tests": {
      "required": true,
      "commands": [
        "npm test -- integration"
      ],
      "services_to_test": [
        "main"
      ]
    },
    "e2e_tests": {
      "required": true,
      "commands": [
        "npm run test:e2e"
      ],
      "flows": [
        "plugin-install-github",
        "plugin-install-local",
        "boilerplate-detection",
        "task-context-injection",
        "plugin-update"
      ]
    },
    "browser_verification": {
      "required": true,
      "pages": [
        {
          "url": "Settings → Plugins",
          "checks": [
            "Tab exists",
            "Plugins list renders",
            "Install button works"
          ]
        },
        {
          "url": "Install Plugin Dialog",
          "checks": [
            "Dialog opens",
            "GitHub/Local modes work",
            "Form validation works",
            "Progress shown"
          ]
        },
        {
          "url": "Project Settings → Boilerplate",
          "checks": [
            "Tab visible for boilerplate projects",
            "Skills list displays 38 items",
            "Version info shown"
          ]
        },
        {
          "url": "Task Creation Wizard",
          "checks": [
            "Boilerplate context injected",
            "Skills visible in preview",
            "Toggle preference works"
          ]
        },
        {
          "url": "Update Plugin Dialog",
          "checks": [
            "Categories displayed",
            "Diff preview works",
            "Conflict highlighting visible",
            "Backup created"
          ]
        }
      ]
    },
    "database_verification": {
      "required": false
    },
    "security_verification": {
      "required": true,
      "checks": [
        "GitHub PAT stored using Electron safeStorage API",
        "No tokens logged to console or debug files",
        "Authenticated URLs never exposed in error messages",
        "Plugin directory permissions restrict access (not world-readable)"
      ]
    }
  },
  "qa_signoff": {
    "status": "approved",
    "timestamp": "2025-12-21T18:45:00Z",
    "qa_session": 1,
    "tests_passed": {
      "unit": "511/511",
      "integration": "68/68",
      "e2e": "29/29"
    },
    "verified_by": "qa_agent"
  },
  "last_updated": "2025-12-21T22:38:30.781982+00:00",
  "status": "human_review",
  "planStatus": "review",
  "updated_at": "2025-12-24T00:14:37.066Z",
  "recoveryNote": "Task recovered from stuck state at 2025-12-22T01:14:15.518Z",
  "qa_iteration_history": [
    {
      "iteration": 1,
      "status": "approved",
      "timestamp": "2025-12-21T23:46:32.758459+00:00",
      "issues": [],
      "duration_seconds": 436.81
    }
  ],
  "qa_stats": {
    "total_iterations": 1,
    "last_iteration": 1,
    "last_status": "approved",
    "issues_by_type": {}
  }
}